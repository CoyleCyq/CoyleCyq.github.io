(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{539:function(t,a,s){"use strict";s.r(a);var e=s(19),r=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"egg-passport"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#egg-passport","aria-hidden":"true"}},[t._v("#")]),t._v(" egg-passport")]),t._v(" "),s("h2",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" egg-passport --save\n")])])]),s("h2",{attrs:{id:"启用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启用","aria-hidden":"true"}},[t._v("#")]),t._v(" 启用")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config/plugin.js")]),t._v("\nexports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("passport "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  enable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'egg-passport'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api","aria-hidden":"true"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("p",[t._v("扩展"),s("code",[t._v("application")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("app.passport.mount(strategy, options)")]),t._v("   => 挂载登录和登录回调路由器以使用给定的strategy")]),t._v(" "),s("li",[s("code",[t._v("app.passport.authenticate(strategy, options)")]),t._v(" => 创建一个中间件，使用给定strategy名称授权第三方帐户，可选options。")]),t._v(" "),s("li",[s("code",[t._v("app.passport.verify(handler)")]),t._v(" => 验证经过身份验证的用户")]),t._v(" "),s("li",[s("code",[t._v("app.passport.serializeUser(handler)")]),t._v(" => 在存储到会话之前序列化用户")]),t._v(" "),s("li",[s("code",[t._v("app.passport.deserializeUser(handler)")]),t._v(" => 从会话还原后反序列化用户")])]),t._v(" "),s("p",[t._v("扩展"),s("code",[t._v("context")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ctx.user")]),t._v(" => 获取当前经过身份验证的用户")]),t._v(" "),s("li",[s("code",[t._v("ctx.isAuthenticated()")]),t._v(" => 测试请求是否经过身份验证")]),t._v(" "),s("li",[s("code",[t._v("ctx.login(user[, options])")]),t._v(" => 启动登录会话user。")]),t._v(" "),s("li",[s("code",[t._v("ctx.logout()")]),t._v(" => 终止现有登录会话")])])])},[],!1,null,null,null);a.default=r.exports}}]);